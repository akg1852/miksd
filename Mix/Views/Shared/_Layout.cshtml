@using Mix.Models;
@using System.Linq;

<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="~/Content/Style.css">
    <link rel="icon" href="~/Content/favicon.ico" />
    <title>@ViewBag.Title - Miksd</title>
</head>
<body>
    <h1>Miksd</h1>
    <p>Your guide to cocktails / mixed drinks</p>

    <ul class="menu">
        <li class="@(Request.RawUrl == "/" ? "current" : "")"><a href="/">Home</a></li>

        @foreach (var category in CocktailCategory.Categories)
        {
            List<Ingredients> ingredients = category.Ingredients;
            var link = "/?n=" + Url.Encode(category.Name);

            if (ingredients != null)
            {
                if (category.Full)
                {
                    link += "&f=1";
                }
                link += "&c=1&i=" + string.Join("&i=", ingredients.Select(i => (long)i));
            }
            if (category.Vessel != Vessels.None)
            {
                link += "&v=" + (long)category.Vessel;
            }

            <li class="@(link == Request.RawUrl ? "current" : "")"><a href="@link">@category.Name</a></li>
        }
    </ul>

    @RenderBody()
</body>
</html>